<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web / Server Status</title>
    <!-- Favicon - the small icon that appears in browser tabs -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <style>
        /* ============================================
           GLOBAL STYLES
           These styles apply to all elements on the page
           ============================================ */

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* ============================================
           BODY & BACKGROUND
           Change the gradient colors here for different background
           Current: Blue gradient (from black to dark blue)
           ============================================ */

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            /* Background gradient - change these colors to customize */
            background: linear-gradient(135deg, #000000 0%, #0a1628 100%);
            min-height: 100vh;
            padding: 20px;
        }

        /* ============================================
           MAIN CONTAINER
           Controls the maximum width of content
           ============================================ */

        .container {
            max-width: 1200px; /* Change this to make content wider/narrower */
            margin: 0 auto;
        }

        /* ============================================
           HEADER SECTION
           The title and subtitle at the top of the page
           ============================================ */

        header {
            text-align: center;
            color: white;
            margin-bottom: 40px; /* Space below header */
        }

        h1 {
            font-size: 2.5rem; /* Main title size */
            margin-bottom: 10px;
        }

        .subtitle {
            opacity: 0.9; /* Slightly transparent */
            font-size: 1.1rem; /* Subtitle text size */
        }

        /* ============================================
           SERVERS GRID
           Layout for server cards - uses CSS Grid
           Change grid-template-columns to adjust card sizes
           ============================================ */

        .servers-grid {
            display: grid;
            /* Auto-fit cards, minimum 350px wide */
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px; /* Space between cards */
            margin-bottom: 20px;
        }

        /* ============================================
           SERVER CARD
           Individual card styling for each server
           ============================================ */

        .server-card {
            background: #1a1a2e; /* Dark background color */
            border-radius: 12px; /* Rounded corners */
            padding: 24px; /* Inside spacing */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5); /* Stronger shadow for dark theme */
            transition: transform 0.2s, box-shadow 0.2s; /* Smooth animation */
            border: 1px solid #2d2d44; /* Subtle border */
        }

        /* Hover effect - card lifts up when mouse hovers over it */
        .server-card:hover {
            transform: translateY(-5px); /* Move up 5px */
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6); /* Larger shadow */
            border-color: #3b82f6; /* Blue border on hover */
        }

        /* ============================================
           SERVER CARD HEADER
           Top section of each card with name and status
           ============================================ */

        .server-header {
            display: flex;
            justify-content: space-between; /* Space between name and status */
            align-items: center;
            margin-bottom: 16px;
        }

        .server-name {
            font-size: 1.4rem; /* Server name text size */
            font-weight: 600; /* Bold text */
            color: #e2e8f0; /* Light gray text color for dark theme */
        }

        /* ============================================
           STATUS BADGES
           Colored badges showing online/offline status
           Change background colors to customize badge colors
           ============================================ */

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px; /* Very rounded corners for pill shape */
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        /* Online status - green badge */
        .status-online {
            background: #48bb78; /* Green color - change this for different online color */
            color: white;
        }

        /* Offline status - red badge */
        .status-offline {
            background: #f56565; /* Red color - change this for different offline color */
            color: white;
        }

        /* Checking status - yellow badge */
        .status-checking {
            background: #ecc94b; /* Yellow color - change this for different checking color */
            color: #2d3748;
        }

        /* ============================================
           SERVER INFORMATION SECTION
           Displays server details like players, version, ping
           ============================================ */

        .server-info {
            margin-top: 16px;
        }

        .info-row {
            display: flex;
            justify-content: space-between; /* Label on left, value on right */
            padding: 8px 0;
            border-bottom: 1px solid #2d2d44; /* Dark divider line */
        }

        .info-row:last-child {
            border-bottom: none; /* No border on last row */
        }

        .info-label {
            color: #a0aec0; /* Light gray label text */
            font-weight: 500;
        }

        .info-value {
            color: #e2e8f0; /* Light text for values */
            font-weight: 600;
        }

        /* ============================================
           PLAYERS LIST
           Box showing list of online players
           ============================================ */

        .players-list {
            margin-top: 12px;
            padding: 12px;
            background: #0f0f1e; /* Darker background */
            border-radius: 8px;
            max-height: 200px; /* Maximum height before scrolling */
            overflow-y: auto; /* Scroll if too many players */
            border: 1px solid #2d2d44; /* Subtle border */
        }

        .player-item {
            display: flex;
            align-items: center;
            padding: 8px 0;
            color: #e2e8f0; /* Light text for player names */
        }

        /* Player avatar image styling */
        .player-avatar {
            width: 32px;
            height: 32px;
            margin-right: 10px;
            border-radius: 4px;
            image-rendering: pixelated; /* Keep Minecraft's pixelated look */
        }

        .player-name {
            font-weight: 500;
        }

        .no-players {
            color: #718096; /* Gray for "no players" message */
            font-style: italic;
        }

        /* ============================================
           ERROR MESSAGES
           Red text for error messages
           ============================================ */

        .error-message {
            color: #f56565; /* Red error text */
            font-size: 0.9rem;
            margin-top: 8px;
        }

        /* ============================================
           ADD SERVER BUTTON
           The "+ Add Server" button with dashed border
           ============================================ */

        .add-server-btn {
            background: #1a1a2e; /* Dark background */
            color: #60a5fa; /* Light blue text */
            border: 2px dashed #3b82f6; /* Dashed blue border */
            padding: 16px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.2s;
            width: 100%;
        }

        /* Hover effect - button turns solid blue */
        .add-server-btn:hover {
            background: #3b82f6; /* Blue background */
            color: white;
            border-style: solid; /* Solid border instead of dashed */
        }

        /* ============================================
           MODAL (POPUP) OVERLAY
           Dark overlay when adding a new server
           ============================================ */

        .modal {
            display: none; /* Hidden by default */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5); /* Semi-transparent black overlay */
            justify-content: center;
            align-items: center;
            z-index: 1000; /* Appears on top of everything */
        }

        .modal.active {
            display: flex; /* Show when active class is added */
        }

        /* ============================================
           MODAL CONTENT BOX
           The white box that appears in the center
           ============================================ */

        .modal-content {
            background: #1a1a2e; /* Dark background */
            padding: 32px;
            border-radius: 12px;
            max-width: 500px;
            width: 90%; /* 90% of screen width on mobile */
            border: 1px solid #2d2d44; /* Subtle border */
        }

        .modal-header {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #e2e8f0; /* Light text */
        }

        /* ============================================
           FORM ELEMENTS
           Input fields and dropdowns in the modal
           ============================================ */

        .form-group {
            margin-bottom: 16px; /* Space between form fields */
        }

        .form-label {
            display: block;
            margin-bottom: 6px;
            color: #a0aec0; /* Light gray label text */
            font-weight: 500;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 10px;
            border: 1px solid #2d2d44; /* Dark border */
            border-radius: 6px;
            font-size: 1rem;
            background: #0f0f1e; /* Dark background */
            color: #e2e8f0; /* Light text */
        }

        /* Focus effect - blue border when clicking in field */
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #3b82f6; /* Blue border when focused */
        }

        /* ============================================
           MODAL BUTTONS
           Cancel and Add Server buttons
           ============================================ */

        .modal-buttons {
            display: flex;
            gap: 12px; /* Space between buttons */
            margin-top: 24px;
        }

        .btn {
            flex: 1; /* Both buttons take equal width */
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        /* Primary button - blue "Add Server" button */
        .btn-primary {
            background: #3b82f6; /* Blue background */
            color: white;
        }

        .btn-primary:hover {
            background: #2563eb; /* Darker blue on hover */
        }

        /* Secondary button - gray "Cancel" button */
        .btn-secondary {
            background: #2d2d44; /* Dark gray background */
            color: #e2e8f0; /* Light text */
        }

        .btn-secondary:hover {
            background: #3d3d54; /* Lighter gray on hover */
        }

        /* ============================================
           FOOTER TEXT
           "Last updated" timestamp at bottom
           ============================================ */

        .last-updated {
            text-align: center;
            color: white;
            opacity: 0.8; /* Slightly transparent */
            margin-top: 20px;
        }

        /* ============================================
           REFRESH ALL BUTTON
           Button at top to refresh all servers
           ============================================ */

        .refresh-btn {
            background: rgba(255, 255, 255, 0.1); /* Semi-transparent for dark theme */
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 10px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            margin: 0 auto;
            display: block;
            margin-bottom: 20px;
            transition: all 0.2s;
        }

        /* Hover effect - turns more opaque */
        .refresh-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body>
    <!-- ============================================
         MAIN CONTAINER
         Everything on the page is inside this container
         ============================================ -->
    <div class="container">

        <!-- ============================================
             HEADER SECTION
             Page title and subtitle
             Change the text and emoji here to customize
             ============================================ -->
        <header>
            <h1>Web / Server Status</h1>
            <p class="subtitle">Track your favorite websites or servers in real-time</p>
        </header>

        <!-- ============================================
             REFRESH ALL BUTTON
             Clicking this checks all servers at once
             ============================================ -->
        <button class="refresh-btn" onclick="refreshAll()">üîÑ Refresh All</button>

        <!-- ============================================
             SERVERS GRID
             All server cards appear here
             JavaScript fills this with server cards automatically
             ============================================ -->
        <div class="servers-grid" id="serversGrid">
            <!-- Server cards will be added here by JavaScript -->
        </div>

        <!-- ============================================
             ADD SERVER BUTTON
             Opens the popup to add a new server
             ============================================ -->
        <button class="add-server-btn" onclick="openModal()">+ Add Server</button>

        <!-- ============================================
             ADD WEBSITE BUTTON
             Opens the popup to add a new website
             ============================================ -->
        <button class="add-server-btn" onclick="openWebsiteModal()" style="margin-top: 10px;">+ Add Website</button>

        <!-- ============================================
             LAST UPDATED TIMESTAMP
             Shows when the page last checked servers
             JavaScript updates this automatically
             ============================================ -->
        <div class="last-updated" id="lastUpdated"></div>
    </div>

    <!-- ============================================
         ADD SERVER MODAL (POPUP)
         This appears when you click "+ Add Server"
         ============================================ -->
    <div class="modal" id="addServerModal">
        <div class="modal-content">

            <!-- Modal title -->
            <h2 class="modal-header">Add New Server</h2>

            <!-- Server Name input field -->
            <div class="form-group">
                <label class="form-label">Name</label>
                <input type="text" class="form-input" id="serverName" placeholder="My Minecraft Server">
            </div>

            <!-- Game Type dropdown menu -->
            <div class="form-group">
                <label class="form-label">Server Type</label>
                <select class="form-select" id="serverType" onchange="updateAddressPlaceholder()">
                    <option value="minecraft-java">Minecraft Java Edition</option>
                    <option value="minecraft-bedrock">Minecraft Bedrock Edition</option>
                    <option value="minecraft-bedrock-realm">Minecraft Bedrock Realm</option>
                </select>
            </div>

            <!-- Server Address input field -->
            <div class="form-group">
                <label class="form-label">Server Address</label>
                <input type="text" class="form-input" id="serverAddress" placeholder="mc.example.com:25565">
                <!-- Hint text that changes based on server type -->
                <div style="font-size: 0.85rem; color: #718096; margin-top: 4px;" id="addressHint">
                    Enter IP:Port for servers
                </div>
            </div>

            <!-- Cancel and Add buttons -->
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                <button class="btn btn-primary" onclick="addServer()">Add Server</button>
            </div>
        </div>
    </div>

    <!-- ============================================
         ADD WEBSITE MODAL (POPUP)
         This appears when you click "+ Add Website"
         ============================================ -->
    <div class="modal" id="addWebsiteModal">
        <div class="modal-content">

            <!-- Modal title -->
            <h2 class="modal-header">Add New Website</h2>

            <!-- Website Name input field -->
            <div class="form-group">
                <label class="form-label">Website Name</label>
                <input type="text" class="form-input" id="websiteName" placeholder="My Website">
            </div>

            <!-- Website URL input field -->
            <div class="form-group">
                <label class="form-label">Website URL</label>
                <input type="url" class="form-input" id="websiteUrl" placeholder="https://example.com">
                <!-- Hint text -->
                <div style="font-size: 0.85rem; color: #718096; margin-top: 4px;">
                    Enter the full URL including https://
                </div>
            </div>

            <!-- Cancel and Add buttons -->
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeWebsiteModal()">Cancel</button>
                <button class="btn btn-primary" onclick="addWebsite()">Add Website</button>
            </div>
        </div>
    </div>

    <script>
        /* ============================================
           JAVASCRIPT CODE
           All the functionality and logic for the page
           ============================================ */

        // ============================================
        // DATA STORAGE
        // Servers are stored in browser's localStorage
        // This means your servers persist even after closing the browser
        // ============================================

        // Load servers from localStorage (or empty array if none saved)
        let servers = JSON.parse(localStorage.getItem('gameServers')) || [];

        // ============================================
        // FUNCTION: saveServers()
        // Saves the servers array to localStorage
        // Called whenever servers are added, removed, or updated
        // ============================================

        function saveServers() {
            localStorage.setItem('gameServers', JSON.stringify(servers));
        }

        // ============================================
        // FUNCTION: updateAddressPlaceholder()
        // Changes the placeholder text and hint based on server type
        // Called when user changes the dropdown in "Add Server" modal
        // ============================================

        function updateAddressPlaceholder() {
            const type = document.getElementById('serverType').value;
            const addressInput = document.getElementById('serverAddress');
            const hint = document.getElementById('addressHint');

            // Update placeholder and hint based on server type
            if (type === 'minecraft-java') {
                addressInput.placeholder = 'mc.example.com:25565';
                hint.textContent = 'Enter IP:Port for Java servers';
            } else if (type === 'minecraft-bedrock') {
                addressInput.placeholder = 'bedrock.example.com:19132';
                hint.textContent = 'Enter IP:Port for Bedrock servers (default port: 19132)';
            } else if (type === 'minecraft-bedrock-realm') {
                addressInput.placeholder = 'realm.address.com or realm code';
                hint.textContent = 'Enter the Realm address or join code';
            }
        }

        // ============================================
        // FUNCTION: openModal()
        // Shows the "Add Server" popup
        // ============================================

        function openModal() {
            document.getElementById('addServerModal').classList.add('active');
        }

        // ============================================
        // FUNCTION: closeModal()
        // Hides the "Add Server" popup and clears the form
        // ============================================

        function closeModal() {
            // Hide the modal
            document.getElementById('addServerModal').classList.remove('active');
            // Clear all input fields
            document.getElementById('serverName').value = '';
            document.getElementById('serverAddress').value = '';
        }

        // ============================================
        // FUNCTION: openWebsiteModal()
        // Shows the "Add Website" popup
        // ============================================

        function openWebsiteModal() {
            document.getElementById('addWebsiteModal').classList.add('active');
        }

        // ============================================
        // FUNCTION: closeWebsiteModal()
        // Hides the "Add Website" popup and clears the form
        // ============================================

        function closeWebsiteModal() {
            // Hide the modal
            document.getElementById('addWebsiteModal').classList.remove('active');
            // Clear all input fields
            document.getElementById('websiteName').value = '';
            document.getElementById('websiteUrl').value = '';
        }

        // ============================================
        // FUNCTION: addServer()
        // Creates a new server from the form data
        // Validates input and adds to servers array
        // ============================================

        function addServer() {
            // Get values from form fields
            const name = document.getElementById('serverName').value.trim();
            const type = document.getElementById('serverType').value;
            const address = document.getElementById('serverAddress').value.trim();

            // Validate that name and address are filled in
            if (!name || !address) {
                alert('Please fill in all fields');
                return;
            }

            // Create new server object and add to array
            servers.push({
                id: Date.now(), // Unique ID based on current timestamp
                name: name,
                type: type,
                address: address,
                status: null // Status will be filled in when checked
            });

            // Save to localStorage, close modal, and update display
            saveServers();
            closeModal();
            renderServers();

            // Immediately check the new server's status
            checkServer(servers[servers.length - 1]);
        }

        // ============================================
        // FUNCTION: addWebsite()
        // Creates a new website from the form data
        // Validates input and adds to servers array
        // ============================================

        function addWebsite() {
            // Get values from form fields
            const name = document.getElementById('websiteName').value.trim();
            const url = document.getElementById('websiteUrl').value.trim();

            // Validate that name and URL are filled in
            if (!name || !url) {
                alert('Please fill in all fields');
                return;
            }

            // Validate URL format
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                alert('Please enter a valid URL starting with http:// or https://');
                return;
            }

            // Create new website object and add to array
            servers.push({
                id: Date.now(), // Unique ID based on current timestamp
                name: name,
                type: 'website',
                address: url,
                status: null // Status will be filled in when checked
            });

            // Save to localStorage, close modal, and update display
            saveServers();
            closeWebsiteModal();
            renderServers();

            // Immediately check the new website's status
            checkServer(servers[servers.length - 1]);
        }

        // ============================================
        // FUNCTION: removeServer(id)
        // Deletes a server from the list
        // Shows confirmation dialog before deleting
        // ============================================

        function removeServer(id) {
            // Ask for confirmation before deleting
            if (confirm('Are you sure you want to remove this server?')) {
                // Filter out the server with matching ID
                servers = servers.filter(s => s.id !== id);
                saveServers();
                renderServers();
            }
        }

        // ============================================
        // FUNCTION: checkMinecraftServer(server)
        // Checks if a Minecraft server is online
        // Uses free API: mcsrvstat.us
        // Returns server status data or error
        // ============================================

        async function checkMinecraftServer(server) {
            try {
                let apiUrl;

                // Build API URL based on server type
                if (server.type === 'minecraft-bedrock-realm' || server.type === 'minecraft-bedrock') {
                    // For Bedrock servers and Realms
                    const address = server.address.replace(/:\d+$/, ''); // Remove port if exists
                    const port = server.address.includes(':') ? server.address.split(':')[1] : '19132';
                    apiUrl = `https://api.mcsrvstat.us/bedrock/3/${address}:${port}`;
                } else {
                    // For Java Edition servers
                    apiUrl = `https://api.mcsrvstat.us/3/${server.address}`;
                }

                // Fetch data from API
                const response = await fetch(apiUrl);
                const data = await response.json();

                // If server is online, return status information
                if (data.online) {
                    return {
                        online: true,
                        players: {
                            online: data.players?.online || 0, // Number of players online
                            max: data.players?.max || 0, // Maximum players allowed
                            list: data.players?.list || [] // List of player names (if available)
                        },
                        version: data.version || 'Unknown', // Minecraft version
                        motd: data.motd?.clean?.[0] || data.motd?.clean || 'No MOTD', // Server message
                        ping: data.debug?.ping || 'N/A' // Ping time in milliseconds
                    };
                } else {
                    // Server is offline
                    return { online: false };
                }
            } catch (error) {
                // If there's an error (network issue, invalid address, etc.)
                console.error('Error checking server:', error);
                return { online: false, error: error.message };
            }
        }

        // ============================================
        // FUNCTION: checkWebsite(server)
        // Checks if a website is online
        // Uses a ping service to check website availability
        // ============================================

        async function checkWebsite(server) {
            try {
                // Try to fetch the website with a timeout
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 5000); // 5 second timeout

                const startTime = Date.now();
                const response = await fetch(server.address, {
                    method: 'HEAD',
                    mode: 'no-cors', // Allow checking without CORS
                    signal: controller.signal
                });
                clearTimeout(timeoutId);

                const ping = Date.now() - startTime;

                // In no-cors mode, we can't read the response, but if fetch succeeds, site is up
                return {
                    online: true,
                    ping: ping
                };
            } catch (error) {
                // Website is offline or unreachable
                console.error('Error checking website:', error);
                return { 
                    online: false, 
                    error: error.name === 'AbortError' ? 'Timeout' : error.message 
                };
            }
        }

        // ============================================
        // FUNCTION: checkServer(server)
        // Checks a single server's status
        // Updates the server in the array and re-renders
        // ============================================

        async function checkServer(server) {
            // Find the server in our array
            const serverIndex = servers.findIndex(s => s.id === server.id);

            // Mark as "checking" and update display
            servers[serverIndex].checking = true;
            renderServers();

            // Check the server status based on type
            let status;
            if (server.type === 'website') {
                status = await checkWebsite(server);
            } else {
                status = await checkMinecraftServer(server);
            }

            // Update server with status results
            servers[serverIndex].status = status;
            servers[serverIndex].checking = false;
            servers[serverIndex].lastChecked = new Date().toISOString();

            // Save and update display
            saveServers();
            renderServers();
        }

        // ============================================
        // FUNCTION: renderServers()
        // Creates HTML for all server cards and displays them
        // This is the main function that builds the visual display
        // ============================================

        function renderServers() {
            const grid = document.getElementById('serversGrid');
            grid.innerHTML = ''; // Clear existing cards

            // Loop through each server and create a card
            servers.forEach(server => {
                const card = document.createElement('div');
                card.className = 'server-card';

                // Get emoji label for server type
                let typeLabel = '';
                if (server.type === 'minecraft-java') typeLabel = '‚òï Java';
                else if (server.type === 'minecraft-bedrock') typeLabel = 'ü™® Bedrock';
                else if (server.type === 'minecraft-bedrock-realm') typeLabel = 'üåé Bedrock Realm';
                else if (server.type === 'website') typeLabel = 'üåê Website';

                let statusBadge = '';
                let serverInfo = '';

                // ============================================
                // BUILD STATUS BADGE
                // Shows "Checking...", "Online", or "Offline"
                // ============================================

                if (server.checking) {
                    // Currently checking status
                    statusBadge = '<span class="status-badge status-checking">Checking...</span>';
                } else if (server.status === null) {
                    // Never checked yet
                    statusBadge = '<span class="status-badge status-checking">Not Checked</span>';
                } else if (server.status.online) {
                    // Server is online - show green badge
                    statusBadge = '<span class="status-badge status-online">Online</span>';

                    // ============================================
                    // BUILD SERVER INFO
                    // Shows players, version, ping when online
                    // Different info for websites vs game servers
                    // ============================================

                    if (server.type === 'website') {
                        // Website-specific info
                        serverInfo = `
                            <div class="server-info">
                                <!-- Response time row -->
                                ${server.status.ping ? `
                                <div class="info-row">
                                    <span class="info-label">Response Time</span>
                                    <span class="info-value">${server.status.ping}ms</span>
                                </div>
                                ` : ''}
                            </div>
                        `;
                    } else {
                        // Game server info
                        serverInfo = `
                            <div class="server-info">
                                <!-- Player count row -->
                                <div class="info-row">
                                    <span class="info-label">Players</span>
                                    <span class="info-value">${server.status.players.online}/${server.status.players.max}</span>
                                </div>

                                <!-- Version row (if available) -->
                                ${server.status.version ? `
                                <div class="info-row">
                                    <span class="info-label">Version</span>
                                    <span class="info-value">${server.status.version}</span>
                                </div>
                                ` : ''}

                                <!-- Ping row (if available) -->
                                ${server.status.ping ? `
                                <div class="info-row">
                                    <span class="info-label">Ping</span>
                                    <span class="info-value">${server.status.ping}ms</span>
                                </div>
                                ` : ''}
                            </div>
                        `;

                        // ============================================
                        // BUILD PLAYER LIST WITH AVATARS (TOP 5)
                        // Shows names and avatar pictures of top 5 online players
                        // ============================================

                        if (server.status.players.list && server.status.players.list.length > 0) {
                            // Limit to top 5 players
                            const topPlayers = server.status.players.list.slice(0, 5);
                            const remainingCount = server.status.players.list.length - topPlayers.length;

                            // Server provides player names - show them with avatars
                            serverInfo += `
                                <div class="players-list">
                                    <div style="font-weight: 600; margin-bottom: 8px; color: #e2e8f0;">Top ${topPlayers.length} Players Online:</div>
                                    ${topPlayers.map(player => `
                                        <div class="player-item">
                                            <img class="player-avatar" 
                                                 src="https://minotar.net/avatar/${player}/32" 
                                                 alt="${player}"
                                                 onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2232%22 height=%2232%22><rect width=%2232%22 height=%2232%22 fill=%22%23ccc%22/></svg>'">
                                            <span class="player-name">${player}</span>
                                        </div>
                                    `).join('')}
                                    ${remainingCount > 0 ? `
                                        <div style="margin-top: 8px; color: #a0aec0; font-size: 0.9rem; font-style: italic;">
                                            +${remainingCount} more player${remainingCount !== 1 ? 's' : ''} online
                                        </div>
                                    ` : ''}
                                </div>
                            `;
                        } else if (server.status.players.online > 0) {
                            // Players online but names not available
                            serverInfo += `
                                <div class="players-list">
                                    <div class="no-players">Player list not available</div>
                                </div>
                            `;
                        }
                    }
                } else {
                    // Server is offline - show red badge
                    statusBadge = '<span class="status-badge status-offline">Offline</span>';
                    // Show error message if there was one
                    if (server.status.error) {
                        serverInfo = `<div class="error-message">Error: ${server.status.error}</div>`;
                    }
                }

                // ============================================
                // BUILD COMPLETE CARD HTML
                // Combines all the parts into final card
                // ============================================

                card.innerHTML = `
                    <!-- Card header with name and status badge -->
                    <div class="server-header">
                        <h3 class="server-name">${server.name}</h3>
                        ${statusBadge}
                    </div>
                    
                    <!-- Server type and address -->
                    <div style="color: #a0aec0; font-size: 0.9rem; margin-bottom: 8px;">
                        ${typeLabel} ‚Ä¢ üìç ${server.address}
                    </div>
                    
                    <!-- Server info (players, version, etc.) -->
                    ${serverInfo}
                    
                    <!-- Refresh and Delete buttons -->
                    <div style="margin-top: 16px; display: flex; gap: 8px;">
                        <button class="btn btn-primary" onclick="checkServer(servers.find(s => s.id === ${server.id}))" style="flex: 1;">
                            Refresh
                        </button>
                        <button class="btn btn-secondary" onclick="removeServer(${server.id})" style="flex: 0;">
                            üóëÔ∏è
                        </button>
                    </div>
                `;

                // Add the completed card to the grid
                grid.appendChild(card);
            });

            // Update the "Last updated" timestamp
            updateLastChecked();
        }

        // ============================================
        // FUNCTION: updateLastChecked()
        // Updates the timestamp at bottom of page
        // Shows live time that updates every second
        // ============================================

        function updateLastChecked() {
            const lastUpdated = document.getElementById('lastUpdated');
            const now = new Date();
            
            // Format time with hours, minutes, and seconds
            const timeString = now.toLocaleTimeString();
            const dateString = now.toLocaleDateString();
            
            lastUpdated.textContent = `Last updated: ${dateString} ${timeString}`;
        }

        // ============================================
        // LIVE CLOCK UPDATE
        // Updates the "Last updated" time every second
        // ============================================
        
        setInterval(updateLastChecked, 1000); // Update every 1 second (1000ms)

        // ============================================
        // FUNCTION: refreshAll()
        // Checks all servers at once
        // Called by "Refresh All" button and auto-refresh timer
        // ============================================

        function refreshAll() {
            servers.forEach(server => checkServer(server));
        }

        // ============================================
        // PAGE INITIALIZATION
        // Runs when page first loads
        // ============================================

        // Display all saved servers
        renderServers();

        // Check status of all servers on page load
        refreshAll();

        // ============================================
        // AUTO-REFRESH TIMER
        // Automatically refreshes all servers every 30 seconds
        // Change 30000 to a different number to adjust frequency
        // (value is in milliseconds: 30000 = 30 seconds)
        // ============================================

        setInterval(refreshAll, 30000); // Auto-refresh every 30 seconds
    </script>
</body>
</html>
